#!/usr/bin/env bash
# Forcibly terminates the 7-highlander process using SIGKILL (Signal 9).
# shellcheck disable=SC2009

# Command substitution finds the PIDs and passes them directly as separate arguments to kill -9.
# The 'kill -9' command will execute for every PID found by the pipe.
# We explicitly suppress errors if no PID is found.

# Find PIDs of processes containing '7-highlander' and exclude the 'grep' process itself.
PIDS_FOUND=$(ps aux | grep -v grep | grep "7-highlander" | awk '{print $2}')

if [ -n "$PIDS_FOUND" ]; then
    # Use the 'xargs' utility to take the space-separated list of PIDs and execute 'kill -9' 
    # for each one, resolving the issue where 'kill' sees multiple PIDs as one argument.
    echo "$PIDS_FOUND" | xargs kill -9
    echo "Sent SIGKILL (9) to PIDs: $PIDS_FOUND"
else
    echo "Error: 7-highlander process not found. Ensure it is running.
